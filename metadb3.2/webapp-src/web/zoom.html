<!--
		MetaDB: A Distributed Metadata Collection Tool
		Copyright 2011, Lafayette College, Eric Luhrs, Haruki Yamaguchi, Long Ho.

		This file is part of MetaDB.

    MetaDB is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    MetaDB is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with MetaDB.  If not, see <http://www.gnu.org/licenses/>.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Image Zoom</title>



<!-- Image Zoom -->
<link rel="stylesheet" href="../css/jqzoom.css" type="text/css">

<!-- jQuery scripts import -->
<script type="text/javascript" src="../js/jQuery/jquery.min.js"></script>

<!-- Image Zoom -->
<script type="text/javascript" src="../js/jQuery/jqzoom.pack.1.0.1.js"></script>
<style type="text/css">
body {
	background-color: #888888;
}
a {
	color: #000000;
}

#instructions {
	border: medium solid #000000; 
	display: table; 
	position: fixed; 
	font-size:20px; 
	color:black; 
	background-color:#EEEEEE; 
	text-align:center;
	float:right;
}
</style>
<script type="text/javascript">
	function gup(name) {
		name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
		var regexS = "[\\?&]" + name + "=([^&#]*)";
		var regex = new RegExp(regexS);
		var results = regex.exec(window.location.href);
		if (results == null)
			return "";
		else
			return results[1];
	}
	
	function setUpZoom() {
		var item = gup('item');
		$.post("ImageZoom.do", {'item': item}, function(data){
			var fullPic = data.zoom;
			var thumbPic = data.thumb;
			var width = $(window).width() - 350;
			var height = $(window).height() - 20;
			
			$('#image-zoom > a').remove();
			$('#image-zoom').append('<a><img></img></a>');
			$('#image-zoom > a > img').bind('load', function() {
				xOffset = $('#image-zoom > a > img').width() + 20;
				yOffset = 10;
				resizeDiv(width-10, height-10, xOffset, yOffset);
			});
			$('#image-zoom > a').attr('href', fullPic);
			$('#image-zoom > a').attr('title', item);
			$('#image-zoom > a > img').attr('src', thumbPic);
			$('#image-zoom > a').jqzoom({
				zoomWidth: width,
				zoomHeight: height,
				position: 'left'
			});
			
		}, 'json');
	}

	function resizeDiv(width, height, xOffset, yOffset) {
		$('#instructions').css('width', width + 'px');
		$('#instructions').css('height', height + 'px');
		$('#instructions').css('top', yOffset + 'px');
		$('#instructions').css('left', xOffset + 'px');
	}
	
</script>
</head>
<body onload='setUpZoom()' onresize='setUpZoom()'>

<div id='image-zoom'>
	<a href=''><img src=''></img></a>
	<div id='instructions'>
		<div style="display: table-cell; vertical-align: middle;">
			<p style="">Mouse over thumbnail to zoom</p>
		</div> 
	</div>
</div>

</body>
</html>